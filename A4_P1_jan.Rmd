---
title: "A4_P1_jan"
author: "JK"
date: "2 listopadu 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(pacman)
p_load(tidyverse)
```

# DATA LOADING & PREPROCESSION

```{r files}
## list of file names
files <- list.files(path = "data/", pattern="*.csv", full.names = T)
```

```{r loading function}
read_heart <- function(filename) {
    raw <- read_csv(filename)
    name <- as.character(filename)
    
    data <- cbind(raw, name) %>%
      mutate(nrow = nrow(raw)) #%>%
      #summarise()
    
    data <- data %>%
      mutate(name = str_remove_all(name, "data/"),
         name = str_remove_all(name, ".csv")) %>%
      
      mutate(study = substr(name, 6, 6),
         group = substr(name, 9, 10),
         t = substr(name, 12, 12),
         condition = substr(name, 14, 30)) %>%
      
      select(-name)
    
    return(data)
}

a <- read_heart(files[1])


```

```{r}
b <- map_df(files, read_heart)
```

